{
  "name": "IS303 Exam Container",
  "image": "mcr.microsoft.com/devcontainers/python:3.12",

  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python"
      ],
      "settings": {
        // --- Turn off user Settings Sync inside Codespaces (prevents Copilot/theme bouncing back)
        "settingsSync.enable": false,

        // --- Git: keep your simple turn-in flow
        "git.enableSmartCommit": false,
        "git.postCommitCommand": "push",

        // --- UI sanity: dark theme, single-click file open, normal preview behavior
        "workbench.colorTheme": "Default Dark Modern",
        "workbench.list.openMode": "singleClick",
        "workbench.editor.enablePreview": true,

        // --- Kill Copilot (even if somehow installed)
        "github.copilot.enable": { "*": false },
        "github.copilot.inlineSuggest.enable": false,
        "editor.inlineSuggest.enabled": false,
        "extensions.unwantedRecommendations": [
          "GitHub.copilot",
          "GitHub.copilot-chat",
          "GitHub.copilot-labs"
        ],

        // --- Suppress extension nags
        "extensions.ignoreRecommendations": true,

        // --- Disable Marketplace so students can't search/install new extensions
        // NOTE: This is the reliable way in Codespaces.
        "extensions.gallery": {
          "serviceUrl": "",
          "cacheUrl": "",
          "itemUrl": ""
        },

        // --- Stability
        "extensions.autoUpdate": false,
        "extensions.autoCheckUpdates": false,
        "workbench.enableExperiments": false
      }
    }
  },

  // Optional: remove Copilot if it sneaks in via org policy or prior sync
  // The "code" CLI is available inside Codespaces.
  "postCreateCommand": "code --uninstall-extension GitHub.copilot || true && code --uninstall-extension GitHub.copilot-chat || true",

  "remoteUser": "vscode"
}